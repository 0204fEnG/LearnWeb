@use '/src/styles/display/flex.scss' as*;
@use '/src/styles/scrollbar/scrollbar.scss'as *;
@use '/src/styles/main/pageMain.scss'as *;
@use '/src/styles/top/pageTop.scss'as *;
@use '/src/styles/display/flex.scss'as *;
@use '/src/styles/padding/topPadding.scss'as *;
@use '/src/styles/padding/topPadding2.scss'as *;
@use '/src/styles/scrollbar/scrollbar.scss'as*;
@use '/src/styles/lineheight/lineheight.scss'as *;
.shorts-layout-container{
  width: 100%;
  height: 100%;
  overflow: hidden;
  @include flex(row,nowrap,space-between,center,flex-start,null);
.shorts-layout{
  flex:1;
  height: 100%;
  position: relative;
  overflow: hidden;
}
.change-container{
  width: 60px;
  height: 80px;
  background-color: antiquewhite;
  @include flex(column,nowrap,space-between,center,null,null);
  .change{
    flex:0 0 30px;
    width: 30px;
    background-color: aquamarine;
  }
    @media (max-width:1000px) {
    display: none;
  }
}
}

.video-comments{
  position: absolute;
z-index: 3;
  width: 400px;
  height: 100%;
  bottom:0;
  right:0;
  transition: all 0.3s ease-in-out;
  transform: translateX(100%);
  @media (max-width:1500px) {
    z-index: 1;
    width: 300px;
  }
   @media (max-width:650px) {
    z-index: 8;
    width: 100%;
    height: 50%;
    transform: translateY(100%);
   }
  &.comments-active{
    transform: translateX(0%);      
        @media (max-width:650px) {
          transform: translateY(0%);  
  }    
}

 .comments-container{
            width: 100%;
            height: 100%;
            overflow-y: auto;                
            @include scrollbar();
            background-color: var(--primary-color);
            @include flex(column,nowrap,flex-start,center,null,null);
            .comments-top{
                width: 100%;
                flex: 0 0 auto;
                backdrop-filter: blur(10px);
                border-bottom: 1px solid var(--border-color);
                background-color: var(--primary-color--opa);
                position: sticky;
                top:0;
                @media (min-width:650px) and (max-width:1000px) {
                    padding-top:36px;
                }
                @media (max-width:650px) {
                    padding-top:0px;
                }
                @include flex(row,nowrap,flex-start,center,flex-start,null);
                .title{
                   width: fit-content;
                   margin: 0 5px;
                   @include flex(column,nowrap,center,null,null,null);
                }
            }
            .comment-container{
                width: 100%;
                flex:0 0 auto;
                padding: 10px;
                @include flex(column,nowrap,flex-start,center,flex-start,null);
                border-bottom: 1px solid var(--border-color--opa);
                &:last-child{
                    border-bottom: none;
                }
                .comment-header{
                    width: 100%;
                    flex:0 0 36px;
                    @include flex(row,nowrap,flex-start,center,null,5px);
                    .avatar-container{
                        height: 100%;
                        aspect-ratio: 1;
                        .avatar{
                            height: 36px;
                            aspect-ratio: 1;
                            border-radius: 50%;
                            object-fit: cover;
                        }
                    }
                    .info-container{
                        flex:1;
                        height: 100%;
                        @include flex(column,nowrap,center,flex-start,flex-start,null);
                        .name-container{
                            width: fit-content;
                            @include flex(row,nowrap,flex-start,center,flex-start,5px);
                            .name{
                                flex:1 1 fit-content;
                                font-weight: bold;
                            }
                            .level{
                                flex:1 1 fit-content;
                                font-size: 0.8rem;
                                color: white;
                                background-color:var(--active-color);
                            }
                            .author{
                                flex:1 1 fit-content;
                                font-size: 0.8rem;
                                color: white;
                                background-color:var(--active-color);
                            }
                        }
                        .time{
                            width: fit-content;
                            @include flex(row,nowrap,flex-start,center,flex-start,null);
                            .publish-time{
                                flex:1 1 fit-content;
                                font-size: 0.8rem;
                                color: var(--text-color--light);
                            }
                        }
                    }
                }
                .comment{
                    width: 100%;
                    flex:0 0 auto;
                    @include lineHeight();
                    padding-left: 41px;
                    font-size: 1.05rem;
                }
                .tools{
                    width: 100%;
                    flex:0 0 30px;
                    padding-left: 41px;
                    @include flex(row,nowrap,flex-start,center,flex-start,10px);
                    .tool{
                        @include flex(row,nowrap,flex-start,center,null,5px);
                        flex:0 0 fit-content;
                        height: 100%;
                        cursor: pointer;
                        .svg-icon{
                            height: 20px;
                            aspect-ratio: 1;
                            fill:var(--text-color);
                        }
                        .count{
                            width: fit-content;
                        }
                    }
                    .more-container{
                        height: 100%;
                        aspect-ratio: 1;
                        margin-left: auto;
                        padding: 5px;
                        .more-svg{
                            height: 100%;
                            aspect-ratio: 1;
                            fill:var(--text-color);
                        }
                    }
                }
                .reply{
                    width: calc(100% - 36px);
                    margin-left: 41px;
                    background-color: var(--background-color--opa);
                    border-radius: 5px;
                    padding: 5px;
                    @include flex(column,nowrap,flex-start,null,null,null);
                    .pre-reply-container{
                        width: 100%;
                        flex:0 0 auto;
                        .pre-reply{
                            @include lineHeight();
                            .user-name{
                                color: var(--active-color);
                            }
                        }
                    }
                    .reply-count{
                        width: fit-content;
                        cursor: pointer;
                        margin-top: 5px;
                        color: var(--active-color);
                    }
                }
            }
            .comments-bottom{
              @media (min-width:650px) and (max-width:1000px) {
                width: 100%;
                flex: 0 0 48px;
                backdrop-filter: blur(10px);
                border-top: 1px solid var(--border-color);
                background-color: var(--primary-color--opa);
                position: sticky;
                bottom:0;
              }
            }
}
}

.video-feed-container {
  width: 100%;
  height: 100%;
  overflow-y: scroll;
  scroll-snap-type: y mandatory;
  -webkit-overflow-scrolling: touch;
  transition: all 0.3s ease-in-out;
  background: #000;
  &:fullscreen {
    overflow: hidden;
  }
  
  &::-webkit-scrollbar {
    display: none;
  }
&.video-feed-leave{
  @media (min-width:1500px) {
       width: calc(100% - 400px); 
  }
  @media (min-width:650px) and (max-width:1500px) {
   width: calc(100% - 300px);   
  }

}
  .video-item {
    width: 100%;
    height: 100%;
    scroll-snap-align: start;
    scroll-snap-stop: always;
    position: relative;

    .viewport-fullscreen {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      z-index: 9999;
      background: #000 !important;
    }

    .loading-indicator {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 1.2rem;
      z-index: 5;
    }

    .short-video{
      width: 100%;
      height: 100%;
      transition: all 0.3s ease-in-out;
      video{
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: #000;
      &:not([src])::after {
        content: '视频加载失败';
        color: white;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
    }
      &.video-enter{
        @media (max-width:650px) {
               height: 50%;
        }

      }
    }
.tools{
  @include flex(column,nowrap,flex-start,center,flex-start,5px);
  padding: 5px;
  position: absolute;
  top:50%;
  right:0;
  .tool{
    flex:0 0 auto;
    width: 100%;
    padding: 5px;
    background-color: rgb(142, 225, 225);
  }
}
    .video-controls {
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 1;
      padding: 5px;
      @include flex(row,nowrap,center,center,flex-start,null);
      @media (max-width:1000px) {
        bottom: 48px;
      }
      color: white;

      // button, select {
      //   background: rgba(255,255,255,0.1);
      //   border: none;
      //   color: white;
      //   padding: 0.5rem;
      //   border-radius: 4px;
      //   cursor: pointer;
      //   transition: background 0.2s;

      //   &:hover {
      //     background: rgba(255,255,255,0.2);
      //   }
      // }

      // .time-display {
      //   color: white;
        
      // }

      // .volume-control {
      //   input[type=range] {
      //     width: 80px;
      //     height: 4px;
      //     border-radius: 2px;
      //     background-color: rgb(255, 255, 255,0.5);
      //     &::-webkit-slider-thumb {
      //      -webkit-appearance: none;     //以下样式随个人喜好
      //      height: 15px; //让滑轨在滑块中间
      //      aspect-ratio: 1;
      //      cursor: pointer;
      //      border-radius: 50%;
      //      background-color: var(--active-color);
      //   }
      //   }
      // }

      .progress-container {
        flex:1;
        height: 16px;
        background: linear-gradient(transparent 0px, transparent 5px,rgb(255, 255, 255,0.5) 5px,rgb(255, 255, 255,0.5) 11px,transparent 11px,transparent 16px);
        position: relative;
        overflow: hidden;
        cursor: pointer;
        @media (max-width:1000px) {
          height: 8px;
        }
        // touch-action: none;

        .progress-bar {
          height: 6px;
          width: 100%;
          margin: 5px 0;
          transform: translateX(-100%);
          background: var(--active-color);
          transition: transform 0.1s linear;
          position: relative;
          @media (max-width:1000px) {
            margin: 3px 0;
          height: 2px;
        }
          &::after{
            content: '';
            position: absolute;
            z-index: 1;
            top: -5px;
            right: -16px;
            width: 16px;
            height: 16px;
            background: #ffffff;
            @media (max-width:1000px) {
              width: 8px;
              height: 8px;
              top:-3px;
              right: -8px;
            }
            border-radius: 50%;
          }
        }
      }

      // .fullscreen-controls {
      //   display: flex;
      //   gap: 0.5rem;
      // }
    }
  }
}
.video-feed-container:fullscreen {
  background: #000;
  .video-item {
    height: 100vh;
  }
}




//setting
.setting-container{
  position: absolute;
  width: 300px;
  height: 500px;
  top:50%;
  left: 50%;
  padding: 10px;
  background-color: var(--background-color);
  transform: translateX(-50%) translateY(50vh);
  overflow-y: auto;
  transition: transform 0.3s ease-in-out;
  @include flex(column,nowrap,flex-start,center,flex-start,10px);
  @include scrollbar();
  &.active{
    transform: translateX(-50%) translateY(-50%);
  }
  .setting{
    width: 100%;
    flex:0 0 auto;
    padding: 5px;
    border-radius: 5px;
    background-color: var(--primary-color);
    &.mode{
      @include flex(row,nowrap,space-between,center,flex-start,null);
      .mode-container{
        flex:0 0 fit-content;
        height: auto;
        @include flex(row,nowrap,space-between,center,flex-start,null);
    .play-mode{
      flex:0 0 fit-content;
      padding: 5px;
      height: 25px;
    }
  }
  }
  }
}
